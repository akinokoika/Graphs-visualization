<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
  <title>Dynamic Text with HTML Formatting</title>
  <style>
   body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 40px;
      font-size: 22px;
    }
    #superbox {
      padding: 20px; /* Add padding for spacing */
    }

    h1 {
      font-size: 30px;
      border-bottom: 1px solid #ccc;
    }

    h2 {
      font-size: 26px;
    }

    p {
      font-size: 22px;
      margin: 10px 0;
    }
pre {
      background-color: #f4f4f4;
      border: 1px solid #d4d4d4;
      border-radius: 3px;
      padding: 10px;
      white-space: pre-wrap;
    }

  
  </style>
</head>
<body>
<div id="superbox">
  <div id="box"></div>
  <div id="text-container"></div>
</div>
  <script>
function textToArrays(text) {
  const textArray = [];
  const formatArray = [];

  const lines = text.split('\n').map(line => line.trim()); // Split by lines and trim whitespace

  for (const line of lines) {
    if (line) { // Skip empty lines
      const [formatText, content] = line.split('#');
      if (formatText && content) {
        formatArray.push(formatText);
        textArray.push(content);
      }
    }
  }

  return { textArray, formatArray };
}

const inputText = `
h1#个人介绍
p#大家好
`;

// const { textArray, formatArray } = textToArrays(it;

   const textArray = [
个人介绍
];
   const formatArray = [
"h1", 
"p", 
"p",
"p",
"h2",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"pre",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"p",
"pre",
"pre",
"pre",
"pre",
"pre",
"p",
"p",
"p",
"p",
"p",
"p",
"h1",
];
    const codeContainer = document.getElementById("text-container");
    const box = document.getElementById("box");
    let textIndex = 0;
    let charIndex = 0;

    
function typeText() {
      

if (textIndex < textArray.length) {
        const currentText = textArray[textIndex];
        const currentFormat = formatArray[textIndex];

     /*   if (charIndex < currentText.length) {
          codeContainer.innerHTML = ''; // Clear the codeContainer
          codeContainer.innerHTML += currentText.substring(0, charIndex + 1);
          charIndex++;
          setTimeout(typeText, 100);
        } else {
          const newElement = document.createElement(currentFormat);
          newElement.textContent = currentText;
          box.appendChild(newElement);
          textIndex++;
          charIndex = 0;
          setTimeout(typeText, 300); // Adjust the delay between elements
        }
*/

if (charIndex < currentText.length) {
          codeContainer.textContent = currentText.substring(0, charIndex + 1);
          charIndex++;

         codeContainer.scrollIntoView({ behavior: "smooth", block: "end" });

          setTimeout(typeText, 100);
        } else {
          const newElement = document.createElement(currentFormat);
          newElement.textContent = currentText;
          box.appendChild(newElement);
          textIndex++;
          charIndex = 0;
          codeContainer.textContent = ''; // Clear the codeContainer
    
         newElement.scrollIntoView({ behavior: "smooth", block: "end" });


          setTimeout(typeText, 300); // Adjust the delay between elements
        }
      }
    }
    typeText();
  </script>
</body>
</html>
